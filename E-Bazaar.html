<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>E-Bazaar</title>
  <style>
    :root {
      --bg: #f4f6f8;
      --card: #fff;
      --accent: #0ea5a4;
      --text: #111827;
      --muted: #6b7280;
      --green: #10b981;
      --red: #ef4444;
    }

    body.dark {
      --bg: #111827;
      --card: #1f2937;
      --text: #f9fafb;
      --muted: #9ca3af;
    }

    * { box-sizing: border-box; transition: all 0.3s ease; }
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      background: var(--bg);
      color: var(--text);
    }

    header {
      background: var(--card);
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      flex-wrap: wrap;
    }

    .logo {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .search-bar {
      flex: 1;
      display: flex;
      gap: 10px;
      margin: 10px 20px;
    }

    .search-bar input, .search-bar select {
      padding: 8px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      width: 100%;
    }

    .actions { display: flex; gap: 10px; }

    button {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 14px;
      cursor: pointer;
      font-weight: 500;
    }

    #themeToggle {
      font-size: 18px;
      background: transparent;
      border: none;
      color: var(--accent);
      cursor: pointer;
    }

    main { padding: 20px; max-width: 1100px; margin: auto; }
    h2, h3 { color: var(--text); }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }

    .card {
      background: var(--card);
      border-radius: 12px;
      padding: 14px;
      box-shadow: 0 5px 12px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
    }

    .card:hover { transform: scale(1.05); }
    .card img { width: 100%; height: 220px; object-fit: cover; border-radius: 10px; }
    .card h3 { margin: 8px 0 4px; font-size: 16px; }
    .price { font-weight: 600; color: var(--accent); }
    .meta { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; }
    .btn-small { padding: 6px 10px; font-size: 13px; border-radius: 6px; color: #fff; }
    .cart-btn { background: var(--green); }
    .wish-btn { background: var(--red); }

    footer { text-align: center; padding: 20px; color: var(--muted); }

    #sellForm {
      background: var(--card);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-radius: 12px;
      padding: 20px;
      width: 100%;
      max-width: 500px;
      margin: 30px auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    #sellForm input, #sellForm select, #sellForm textarea {
      padding: 10px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      width: 100%;
      font-family: inherit;
    }

    #sellForm button {
      width: 100%;
      background: var(--accent);
      color: #fff;
      font-weight: 600;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: var(--card);
      padding: 20px;
      border-radius: 10px;
      width: 320px;
      color: var(--text);
    }

    .modal-content input {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: transparent;
      color: var(--text);
    }

    .close { margin-top: 10px; background: #ef4444; width: 100%; }

    .list-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      gap: 10px;
    }

    .list-item img { width: 60px; height: 60px; border-radius: 6px; object-fit: cover; }
    .list-item h4 { margin: 0; font-size: 14px; }
    .list-item .remove { background: #ef4444; padding: 4px 6px; font-size: 12px; }
  </style>
</head>
<body>
  <header>
    <div class="logo">üõçÔ∏è E-Bazaar</div>

    <div class="search-bar">
      <input type="text" id="search" placeholder="Search products...">
      <select id="category-filter">
        <option value="">All Categories</option>
        <option>Electronics</option>
        <option>Clothing</option>
        <option>Books</option>
        <option>Home</option>
      </select>
      <select id="sort-filter">
        <option value="new">Newest</option>
        <option value="low">Price: Low ‚Üí High</option>
        <option value="high">Price: High ‚Üí Low</option>
      </select>
    </div>

    <div class="actions">
      <button id="wishlistBtn">‚ù§Ô∏è Wishlist</button>
      <button id="cartBtn">üõí Cart</button>
      <button id="loginBtn">Login</button>
      <button id="themeToggle">üåô</button>
    </div>
  </header>

  <main>
    <h2>Top Deals</h2>
    <div class="grid" id="productGrid"></div>

    <h3 style="text-align:center;margin-top:40px;">Add New Product</h3>
    <form id="sellForm">
      <input type="text" name="title" placeholder="Product name" required>
      <input type="number" name="price" placeholder="Price ‚Çπ" required>
      <input type="text" name="img" placeholder="Image URL">
      <select name="category">
        <option>Electronics</option>
        <option>Clothing</option>
        <option>Books</option>
        <option>Home</option>
      </select>
      <textarea name="desc" placeholder="Short description" rows="3"></textarea>
      <button type="submit">Add Product</button>
    </form>
  </main>

  <footer>¬© 2025 E-Bazaar ‚Ä¢ Made with ‚ù§Ô∏è by Lata</footer>

  <!-- Login Modal -->
  <div class="modal" id="loginModal">
    <div class="modal-content">
      <h3>Login</h3>
      <input type="text" id="loginUsername" placeholder="Username" />
      <input type="password" id="loginPassword" placeholder="Password" />
      <button id="loginConfirm">Login</button>
      <p style="font-size:13px;margin-top:8px;">No account? <a href="#" id="openSignup">Sign Up</a></p>
      <button class="close" id="closeLogin">Cancel</button>
    </div>
  </div>

  <!-- Signup Modal -->
  <div class="modal" id="signupModal">
    <div class="modal-content">
      <h3>Sign Up</h3>
      <input type="text" id="signupUsername" placeholder="Create Username" />
      <input type="password" id="signupPassword" placeholder="Create Password" />
      <button id="signupConfirm">Sign Up</button>
      <p style="font-size:13px;margin-top:8px;">Already have an account? <a href="#" id="openLogin">Login</a></p>
      <button class="close" id="closeSignup">Cancel</button>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="modal" id="cartModal">
    <div class="modal-content">
      <h3>Your Cart</h3>
      <div id="cartList"></div>
      <h4 id="cartTotal">Total: ‚Çπ0</h4>
      <button class="close" id="closeCart">Close</button>
    </div>
  </div>

  <!-- Wishlist Modal -->
  <div class="modal" id="wishModal">
    <div class="modal-content">
      <h3>Your Wishlist</h3>
      <div id="wishList"></div>
      <button class="close" id="closeWish">Close</button>
    </div>
  </div>

  <script>
    const products = [
      {id:1,title:"Wireless Earbuds",price:1499,category:"Electronics",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRswnAO47Qb0Yc1Pq_wdnRwWDPj6eZ52aSOXA&s"},
      {id:2,title:"Smart Watch",price:2499,category:"Electronics",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQvY9gl4_fwhdfOaIvpr0wx1T7ogG0E2nJDuw&s"},
      {id:3,title:"Handmade Kurta",price:999,category:"Clothing",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRhMlfrG6riOvGqAwpU5vkzlpXi3GNtrbJ1RA&s"},
      {id:4,title:"Casual Shoes",price:1799,category:"Clothing",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSKs4NDNrYfHz6E2lJ7u-YVgR2hb8Lph1D59g&s"},
      {id:5,title:"Programming Book",price:499,category:"Books",img:"https://images.unsplash.com/photo-1512820790803-83ca734da794"},
      {id:6,title:"Cookbook",price:699,category:"Books",img:"https://images.unsplash.com/photo-1504674900247-0877df9cc836"},
      {id:7,title:"Ceramic Vase",price:799,category:"Home",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRPzQ0RdF-qvdBt9v6YCI-r29cy9clwQRUJBg&s"},
      {id:8,title:"Wall Clock",price:1199,category:"Home",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRx0ZPV-Q49qrDlq4NxqOnhmh6kCMyLTBuqKg&s"},
      {id:9,title:"Bluetooth Speaker",price:1999,category:"Electronics",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEwtRJk6xYtez8Z5Rn6IPtVyv2kiZB5tPW3w&s"},
      {id:10,title:"Table Lamp",price:899,category:"Home",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSi3rHr6D9nTalQOOFh_Tch5f93xT_4-FlMwQ&s"},
      {id:11,title:"Fastrack watch",price:1999,category:"Electronics",img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdmEklJh5l_7SwvN0Zi6-2-AQnQClET_GHUQ&s"},
      {id:112,title:"Wall decor",price:899,category:"Home",img:"https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcSiXy0S8YFAqM7Pb8IQtYem_933U9ANMhGRe-T7cKHrbzlKxMCdbdYgRvE2wcZCqYqSUsHge3Yxs8pRFo5PKSPQUnR3KDMnpFalpiRje4Wdte0no4x3rDtJCETtEVgg4ryJxrRpcik&usqp=CAc"}
    ];

    let wishlist=[], cart=[];

    const grid=document.getElementById('productGrid');
    const categoryFilter=document.getElementById('category-filter');
    const sortFilter=document.getElementById('sort-filter');
    const search=document.getElementById('search');

    function displayProducts(items){
      grid.innerHTML="";
      items.forEach(p=>{
        const card=document.createElement('div');
        card.className="card";
        card.innerHTML=`
          <img src="${p.img}" alt="${p.title}">
          <h3>${p.title}</h3>
          <div class="price">‚Çπ${p.price}</div>
          <div class="meta">
            <button class="btn-small cart-btn" onclick="addToCart(${p.id})">Add to Cart</button>
            <button class="btn-small wish-btn" onclick="addToWish(${p.id})">‚ô• Wishlist</button>
          </div>`;
        grid.appendChild(card);
      });
    }

    function addToCart(id){
      const item=products.find(p=>p.id===id);
      if(!cart.includes(item)){cart.push(item);}
      updateCart();
      alert(item.title+" added to cart");
    }

    function addToWish(id){
      const item=products.find(p=>p.id===id);
      if(!wishlist.includes(item)){wishlist.push(item);}
      updateWish();
      alert(item.title+" added to wishlist");
    }

    function updateCart(){
      const cartList=document.getElementById('cartList');
      const cartTotal=document.getElementById('cartTotal');
      cartList.innerHTML="";
      let total=0;
      cart.forEach((p,i)=>{
        total+=p.price;
        cartList.innerHTML+=`
          <div class="list-item">
            <img src="${p.img}">
            <div><h4>${p.title}</h4><p>‚Çπ${p.price}</p></div>
            <button class="remove" onclick="removeCart(${i})">X</button>
          </div>`;
      });
      cartTotal.textContent="Total: ‚Çπ"+total;
    }

    function updateWish(){
      const wishList=document.getElementById('wishList');
      wishList.innerHTML="";
      wishlist.forEach((p,i)=>{
        wishList.innerHTML+=`
          <div class="list-item">
            <img src="${p.img}">
            <div><h4>${p.title}</h4><p>‚Çπ${p.price}</p></div>
            <button class="remove" onclick="removeWish(${i})">X</button>
          </div>`;
      });
    }

    function removeCart(i){ cart.splice(i,1); updateCart(); }
    function removeWish(i){ wishlist.splice(i,1); updateWish(); }

    function applyFilters(){
      let filtered=[...products];
      const term=search.value.toLowerCase();
      if(term) filtered=filtered.filter(p=>p.title.toLowerCase().includes(term));
      const cat=categoryFilter.value;
      if(cat) filtered=filtered.filter(p=>p.category===cat);
      const sort=sortFilter.value;
      if(sort==="low") filtered.sort((a,b)=>a.price-b.price);
      if(sort==="high") filtered.sort((a,b)=>b.price-a.price);
      displayProducts(filtered);
    }

    search.addEventListener('input', applyFilters);
    categoryFilter.addEventListener('change', applyFilters);
    sortFilter.addEventListener('change', applyFilters);

    document.getElementById('sellForm').addEventListener('submit', e=>{
      e.preventDefault();
      const data=new FormData(e.target);
      const newP={
        id:Date.now(),
        title:data.get('title'),
        price:Number(data.get('price')),
        img:data.get('img')||'https://via.placeholder.com/600x400?text=New+Product',
        category:data.get('category'),
        desc:data.get('desc')
      };
      products.unshift(newP);
      displayProducts(products);
      e.target.reset();
      alert('Product added successfully!');
    });

    // --- LOGIN & SIGNUP LOGIC ---
    const loginModal=document.getElementById("loginModal");
    const signupModal=document.getElementById("signupModal");

    const openLogin=document.getElementById("openLogin");
    const openSignup=document.getElementById("openSignup");

    document.getElementById("loginBtn").onclick=()=>loginModal.style.display="flex";
    document.getElementById("closeLogin").onclick=()=>loginModal.style.display="none";
    document.getElementById("closeSignup").onclick=()=>signupModal.style.display="none";

    openSignup.onclick=(e)=>{ e.preventDefault(); loginModal.style.display="none"; signupModal.style.display="flex"; };
    openLogin.onclick=(e)=>{ e.preventDefault(); signupModal.style.display="none"; loginModal.style.display="flex"; };

    // --- SIGN UP ---
    document.getElementById("signupConfirm").onclick=()=>{
      const u=document.getElementById("signupUsername").value.trim();
      const p=document.getElementById("signupPassword").value.trim();
      if(!u||!p) return alert("Please fill all fields");
      if(localStorage.getItem(u)) return alert("Username already exists!");
      localStorage.setItem(u, p);
      alert("Account created! Please login now.");
      signupModal.style.display="none";
      loginModal.style.display="flex";
    };

    // --- LOGIN ---
    document.getElementById("loginConfirm").onclick=()=>{
      const u=document.getElementById("loginUsername").value.trim();
      const p=document.getElementById("loginPassword").value.trim();
      const stored=localStorage.getItem(u);
      if(!stored) return alert("No such user. Please sign up first.");
      if(stored!==p) return alert("Incorrect password!");
      alert("Welcome, "+u+"!");
      loginModal.style.display="none";
      document.getElementById("loginBtn").textContent="üë§ "+u;
      document.getElementById("loginBtn").disabled=true;
    };

    const cartModal=document.getElementById('cartModal');
    document.getElementById('cartBtn').onclick=()=>{cartModal.style.display='flex'; updateCart();};
    document.getElementById('closeCart').onclick=()=>cartModal.style.display='none';

    const wishModal=document.getElementById('wishModal');
    document.getElementById('wishlistBtn').onclick=()=>{wishModal.style.display='flex'; updateWish();};
    document.getElementById('closeWish').onclick=()=>wishModal.style.display='none';

    const toggle=document.getElementById('themeToggle');
    toggle.onclick=()=>{
      document.body.classList.toggle('dark');
      toggle.textContent=document.body.classList.contains('dark')?"‚òÄÔ∏è":"üåô";
    };

    displayProducts(products);
  </script>
</body>
</html>